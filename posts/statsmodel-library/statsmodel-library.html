<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-02-01">
<meta name="description" content="Comparing and contrasting the statsmodel library against standard R Language">

<title>The statsmodel Python Library – bendemouth.github.io</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-ddd961a2510921635943dfbbd19534c4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">bendemouth.github.io</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/bendemouth"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">The statsmodel Python Library</h1>
                  <div>
        <div class="description">
          Comparing and contrasting the statsmodel library against standard R Language
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Python</div>
                <div class="quarto-category">R</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 1, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>When thinking about a data science project, one of the first decisions I find myself having to make is which language I want to do the project with. My first two choices are generally R or Python. Both languages have the capabilities to do high level data science work, but each has its pros and cons as well.</p>
<section id="python" class="level2">
<h2 class="anchored" data-anchor-id="python">Python</h2>
<p>Python is often one of the first languages a new programmer learns. Its syntax is intuitive and the language has become quite popular over recent years, in part because of the (<a href="https://pypi.org/">community of open source libraries</a>) that are easy to import to a script.</p>
<p>A drawback to Python, however, is that it does not come built in with data frame capabilities and requires a third-party library (Pandas being the most popular) to structure data in a way that is easier to work with. You can structure data in lists, arrays, and dictionaries, but it requires a fair amount of code to get the data structured in a way you can work with it.</p>
<p>For how intuitive most of the language’s syntax is, visualizations are not the easiest to create either. Matplotlib is a popular library to create visualizations, but it is not as straightforward as some of the packages or built in capabilities available in R.</p>
</section>
<section id="r" class="level1">
<h1>R</h1>
<p>R is a programming language that is built by data scientists for data scientists. The language is widely used in academia and can complete complex statistical tasks with relatively little code. R also has built in data frame handling capabilities. When working with a large data set, it is quite easy to bring the data set into your environment and begin working with it immediately.</p>
<p>While the (<a href="https://cran.r-project.org/">Comprehensive R Archive Network (CRAN)</a>) has some great libraries available, the roughly 19,000 packages available pale in comparaison to the over 300,000 that are available in Python. Even then, some packages are not maintained but still available and won’t work properly if you are using many libraries. Further, the learning curve on R is much steeper than Python because the syntax often does not resemble simple human language in the way that Python does.</p>
</section>
<section id="personal-greviances" class="level1">
<h1>Personal Greviances</h1>
<p>Consider this section of the blog my personal Festivus celebration. To paraphrase Frank Constanza, the tradition of data science begins with an airing of grievances. This is my blog, I have a lot of problems with these languages, and now you’re gonna hear about it.</p>
<p>My biggest complaint with Python is that there is often a ton of data preprocessing that needs to be done in order to get the data ready to build a model. And even then, trying to get the data into the actual model is an arduous task. I spend more time fighting with data types in R than I do in any other language as well. Why there is so much trouble casting a 3 from a character to an integer I will never understand. It’s in my data set as an integer, why are you reading it as a character, R?</p>
</section>
<section id="there-has-to-be-a-better-way" class="level1">
<h1>There Has To Be A Better Way</h1>
<p>Enter, the (<a href="https://www.statsmodels.org/stable/index.html">statsmodels</a>) Python library. From the statsmodels website, this library “supports specifying models using R-style formulas”. My understanding is that this should create a best of both worlds situations in that we can leverage the speed and third-party libraries of Python while also maintaining the simple statistical model creation found in R.</p>
</section>
<section id="about-statsmodels" class="level1">
<h1>About statsmodels</h1>
<p>The statsmodels package was originally written as the models module of the scipy.stats package. When the module was removed in the late 2000s, developer Jonathan Taylor improved the package and decided to release it on its own.</p>
<p>statsmodels has a host of statistical modeling capabilites available through the statsmodels.api, statsmodels.tsa.api, and statsmodels.formula.api, models. A full list is available (<a href="https://www.statsmodels.org/stable/api.html">here</a>) with documentation to go along with each.</p>
</section>
<section id="an-example" class="level1">
<h1>An Example</h1>
<p>To try this pacage out, I want to use this library to see how much returning production influences a college football team’s winning. With the rise of the transfer portal in college football, there is a new debate over whether a team should seek out the best talent in the portal, or recruit players out of high school and develop them in their system. A team’s percentage of returning EPA (called PPA in our data API) will serve as our independent variable, and the team’s winning percentage will be the dependent variable.</p>
<p>EPA stands for Expected Points Added, and measures how many expected points are added or lost on a given play. For example, if a team has the ball on their own 20 yard line, they might be expected to get 2.5 point on that drive. But if they throw a 75 yard pass to take the ball down to the opponents 5 yard line, their expected points for the drive might rise to 6.5. The EPA for that play would be 4. I don’t know the exact breakdown of expected points on every yard line, but I this example should demonstrate how EPA works.</p>
<p>I’ll be pulling the data from the folks at (<a href="collegefootballdata.com">CollegeFootballData</a>). I highly recommend this site for using college football data. If you wish to use this library, however, you will need to (<a href="https://collegefootballdata.com/key">sign up for a free API key</a>) and configure it according to their instructions.</p>
<div id="cell-3" class="cell" data-execution_count="99">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm <span class="co"># Our statsmodels library!</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> cfbd <span class="co"># College football data library</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> cfbd.rest <span class="im">import</span> ApiException <span class="co"># Handle API exceptions from cfbd</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd <span class="co"># Import pandas to work with dataframes</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-4" class="cell" data-execution_count="100">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>configuration <span class="op">=</span> cfbd.Configuration()</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>configuration.api_key[<span class="st">'Authorization'</span>] <span class="op">=</span> <span class="st">'TckFfmc2oFlgUIw8GK5755CtUD00WFZPpbdOOwVD8J2iW1uZ6udJbM7yEGNKvdCO'</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>configuration.api_key_prefix[<span class="st">'Authorization'</span>] <span class="op">=</span> <span class="st">'Bearer'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-5" class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up instance of the PlayersAPI class from cfbd</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>epa_api <span class="op">=</span> cfbd.PlayersApi(cfbd.ApiClient(configuration))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>epa_resonse_2022 <span class="op">=</span> epa_api.get_returning_production(year<span class="op">=</span><span class="dv">2022</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>epa_resonse_2023 <span class="op">=</span> epa_api.get_returning_production(year<span class="op">=</span><span class="dv">2023</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>epa_resonse_2024 <span class="op">=</span> epa_api.get_returning_production(year<span class="op">=</span><span class="dv">2024</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract data from objects in API response</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>epa_response_data_2022 <span class="op">=</span> [<span class="bu">vars</span>(item) <span class="cf">for</span> item <span class="kw">in</span> epa_resonse_2022]</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>epa_response_data_2023 <span class="op">=</span> [<span class="bu">vars</span>(item) <span class="cf">for</span> item <span class="kw">in</span> epa_resonse_2023]</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>epa_response_data_2024 <span class="op">=</span> [<span class="bu">vars</span>(item) <span class="cf">for</span> item <span class="kw">in</span> epa_resonse_2024]</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to dataframes</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>epa_df_2022 <span class="op">=</span> pd.DataFrame(epa_response_data_2022)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>epa_df_2023 <span class="op">=</span> pd.DataFrame(epa_response_data_2023)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>epa_df_2024 <span class="op">=</span> pd.DataFrame(epa_response_data_2024)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine to single EPA dataframe</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>epa_df <span class="op">=</span> pd.concat([epa_df_2022, epa_df_2023, epa_df_2024])</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>epa_df.head(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="101">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">_configuration</th>
<th data-quarto-table-cell-role="th">_season</th>
<th data-quarto-table-cell-role="th">_team</th>
<th data-quarto-table-cell-role="th">_conference</th>
<th data-quarto-table-cell-role="th">_total_ppa</th>
<th data-quarto-table-cell-role="th">_total_passing_ppa</th>
<th data-quarto-table-cell-role="th">_total_receiving_ppa</th>
<th data-quarto-table-cell-role="th">_total_rushing_ppa</th>
<th data-quarto-table-cell-role="th">_percent_ppa</th>
<th data-quarto-table-cell-role="th">_percent_passing_ppa</th>
<th data-quarto-table-cell-role="th">_percent_receiving_ppa</th>
<th data-quarto-table-cell-role="th">_percent_rushing_ppa</th>
<th data-quarto-table-cell-role="th">_usage</th>
<th data-quarto-table-cell-role="th">_passing_usage</th>
<th data-quarto-table-cell-role="th">_receiving_usage</th>
<th data-quarto-table-cell-role="th">_rushing_usage</th>
<th data-quarto-table-cell-role="th">discriminator</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>&lt;cfbd.configuration.Configuration object at 0x...</td>
<td>2022</td>
<td>Air Force</td>
<td>Mountain West</td>
<td>249.5</td>
<td>57.7</td>
<td>28.1</td>
<td>163.7</td>
<td>0.725</td>
<td>0.997</td>
<td>0.309</td>
<td>0.839</td>
<td>0.852</td>
<td>0.917</td>
<td>0.392</td>
<td>0.892</td>
<td>None</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>&lt;cfbd.configuration.Configuration object at 0x...</td>
<td>2022</td>
<td>Akron</td>
<td>Mid-American</td>
<td>52.9</td>
<td>4.7</td>
<td>43.5</td>
<td>4.6</td>
<td>0.253</td>
<td>0.086</td>
<td>0.349</td>
<td>0.155</td>
<td>0.485</td>
<td>0.343</td>
<td>0.290</td>
<td>0.806</td>
<td>None</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>&lt;cfbd.configuration.Configuration object at 0x...</td>
<td>2022</td>
<td>Alabama</td>
<td>SEC</td>
<td>401.7</td>
<td>243.9</td>
<td>117.3</td>
<td>40.5</td>
<td>0.555</td>
<td>0.896</td>
<td>0.313</td>
<td>0.525</td>
<td>0.586</td>
<td>0.962</td>
<td>0.276</td>
<td>0.446</td>
<td>None</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>&lt;cfbd.configuration.Configuration object at 0x...</td>
<td>2022</td>
<td>Appalachian State</td>
<td>Sun Belt</td>
<td>304.1</td>
<td>165.3</td>
<td>41.6</td>
<td>97.3</td>
<td>0.561</td>
<td>0.967</td>
<td>0.150</td>
<td>1.031</td>
<td>0.680</td>
<td>0.943</td>
<td>0.211</td>
<td>0.751</td>
<td>None</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>&lt;cfbd.configuration.Configuration object at 0x...</td>
<td>2022</td>
<td>Arizona</td>
<td>Pac-12</td>
<td>158.1</td>
<td>56.8</td>
<td>79.1</td>
<td>22.2</td>
<td>0.569</td>
<td>1.000</td>
<td>0.420</td>
<td>0.677</td>
<td>0.825</td>
<td>1.000</td>
<td>0.406</td>
<td>0.925</td>
<td>None</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>As you can see, we have a data frame created now with our EPA data. A note on the API response: the response is given as a list of objects, rather than as a dictionary, which is why we need to parse things out before creating a full dataframe.</p>
<p>The next thing we’ll need to do is get the winning percentages for each of these teams and combine that with our EPA data.</p>
<div id="cell-7" class="cell" data-execution_count="102">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up instance of the GamesAPI class from cfbd</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>teams_api <span class="op">=</span> cfbd.GamesApi(cfbd.ApiClient(configuration))</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>teams_response_2022 <span class="op">=</span> teams_api.get_team_records(year<span class="op">=</span><span class="dv">2022</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>teams_response_2023 <span class="op">=</span> teams_api.get_team_records(year<span class="op">=</span><span class="dv">2023</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>teams_response_2024 <span class="op">=</span> teams_api.get_team_records(year<span class="op">=</span><span class="dv">2024</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-8" class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>teams_response_data_2022 <span class="op">=</span> [<span class="bu">vars</span>(item) <span class="cf">for</span> item <span class="kw">in</span> teams_response_2022]</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>teams_response_data_2023 <span class="op">=</span> [<span class="bu">vars</span>(item) <span class="cf">for</span> item <span class="kw">in</span> teams_response_2023]</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>teams_response_data_2024 <span class="op">=</span> [<span class="bu">vars</span>(item) <span class="cf">for</span> item <span class="kw">in</span> teams_response_2024]</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>teams_df_2022 <span class="op">=</span> pd.DataFrame(teams_response_data_2022)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>teams_df_2023 <span class="op">=</span> pd.DataFrame(teams_response_data_2023)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>teams_df_2024 <span class="op">=</span> pd.DataFrame(teams_response_data_2024)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>teams_df <span class="op">=</span> pd.concat([teams_df_2022, teams_df_2023, teams_df_2024])</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename columns so they will combine easily</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>epa_df.rename(columns<span class="op">=</span>{<span class="st">'_season'</span>: <span class="st">'_year'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge the dataframes</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>full_df <span class="op">=</span> pd.merge(epa_df, teams_df, how<span class="op">=</span><span class="st">'left'</span>, on<span class="op">=</span>[<span class="st">'_year'</span>, <span class="st">'_team'</span>])</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract data from the games object</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>full_df[[<span class="st">'games'</span>, <span class="st">'wins'</span>, <span class="st">'losses'</span>, <span class="st">'ties'</span>]] <span class="op">=</span> full_df[<span class="st">'_total'</span>].<span class="bu">apply</span>(</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> x: [<span class="bu">getattr</span>(x, <span class="st">'_games'</span>, <span class="va">None</span>), <span class="bu">getattr</span>(x, <span class="st">'_wins'</span>, <span class="va">None</span>), </span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>               <span class="bu">getattr</span>(x, <span class="st">'_losses'</span>, <span class="va">None</span>), <span class="bu">getattr</span>(x, <span class="st">'_ties'</span>, <span class="va">None</span>)]</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>).<span class="bu">apply</span>(pd.Series)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop the original '_total' column</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>full_df.drop(columns<span class="op">=</span>[<span class="st">'_total'</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>full_df[<span class="st">'wp'</span>] <span class="op">=</span> full_df[<span class="st">'wins'</span>] <span class="op">/</span> full_df[<span class="st">'games'</span>]</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop rows with missing informatoion</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>full_df.dropna(subset<span class="op">=</span>[<span class="st">'wp'</span>, <span class="st">'_percent_ppa'</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>full_df.head(<span class="dv">5</span>)</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="107">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">_configuration_x</th>
<th data-quarto-table-cell-role="th">_year</th>
<th data-quarto-table-cell-role="th">_team</th>
<th data-quarto-table-cell-role="th">_conference_x</th>
<th data-quarto-table-cell-role="th">_total_ppa</th>
<th data-quarto-table-cell-role="th">_total_passing_ppa</th>
<th data-quarto-table-cell-role="th">_total_receiving_ppa</th>
<th data-quarto-table-cell-role="th">_total_rushing_ppa</th>
<th data-quarto-table-cell-role="th">_percent_ppa</th>
<th data-quarto-table-cell-role="th">_percent_passing_ppa</th>
<th data-quarto-table-cell-role="th">_percent_receiving_ppa</th>
<th data-quarto-table-cell-role="th">_percent_rushing_ppa</th>
<th data-quarto-table-cell-role="th">_usage</th>
<th data-quarto-table-cell-role="th">_passing_usage</th>
<th data-quarto-table-cell-role="th">_receiving_usage</th>
<th data-quarto-table-cell-role="th">_rushing_usage</th>
<th data-quarto-table-cell-role="th">discriminator_x</th>
<th data-quarto-table-cell-role="th">_configuration_y</th>
<th data-quarto-table-cell-role="th">_team_id</th>
<th data-quarto-table-cell-role="th">_conference_y</th>
<th data-quarto-table-cell-role="th">_division</th>
<th data-quarto-table-cell-role="th">_expected_wins</th>
<th data-quarto-table-cell-role="th">_conference_games</th>
<th data-quarto-table-cell-role="th">_home_games</th>
<th data-quarto-table-cell-role="th">_away_games</th>
<th data-quarto-table-cell-role="th">discriminator_y</th>
<th data-quarto-table-cell-role="th">games</th>
<th data-quarto-table-cell-role="th">wins</th>
<th data-quarto-table-cell-role="th">losses</th>
<th data-quarto-table-cell-role="th">ties</th>
<th data-quarto-table-cell-role="th">wp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>&lt;cfbd.configuration.Configuration object at 0x...</td>
<td>2022</td>
<td>Air Force</td>
<td>Mountain West</td>
<td>249.5</td>
<td>57.7</td>
<td>28.1</td>
<td>163.7</td>
<td>0.725</td>
<td>0.997</td>
<td>0.309</td>
<td>0.839</td>
<td>0.852</td>
<td>0.917</td>
<td>0.392</td>
<td>0.892</td>
<td>None</td>
<td>&lt;cfbd.configuration.Configuration object at 0x...</td>
<td>2005.0</td>
<td>Mountain West</td>
<td>Mountain</td>
<td>10.9</td>
<td>{'games': 8, 'losses': 3, 'ties': 0, 'wins': 5}</td>
<td>{'games': 7, 'losses': 1, 'ties': 0, 'wins': 6}</td>
<td>{'games': 4, 'losses': 2, 'ties': 0, 'wins': 2}</td>
<td>None</td>
<td>13.0</td>
<td>10.0</td>
<td>3.0</td>
<td>0.0</td>
<td>0.769231</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>&lt;cfbd.configuration.Configuration object at 0x...</td>
<td>2022</td>
<td>Akron</td>
<td>Mid-American</td>
<td>52.9</td>
<td>4.7</td>
<td>43.5</td>
<td>4.6</td>
<td>0.253</td>
<td>0.086</td>
<td>0.349</td>
<td>0.155</td>
<td>0.485</td>
<td>0.343</td>
<td>0.290</td>
<td>0.806</td>
<td>None</td>
<td>&lt;cfbd.configuration.Configuration object at 0x...</td>
<td>2006.0</td>
<td>Mid-American</td>
<td>East</td>
<td>2.0</td>
<td>{'games': 8, 'losses': 7, 'ties': 0, 'wins': 1}</td>
<td>{'games': 5, 'losses': 4, 'ties': 0, 'wins': 1}</td>
<td>{'games': 7, 'losses': 6, 'ties': 0, 'wins': 1}</td>
<td>None</td>
<td>12.0</td>
<td>2.0</td>
<td>10.0</td>
<td>0.0</td>
<td>0.166667</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>&lt;cfbd.configuration.Configuration object at 0x...</td>
<td>2022</td>
<td>Alabama</td>
<td>SEC</td>
<td>401.7</td>
<td>243.9</td>
<td>117.3</td>
<td>40.5</td>
<td>0.555</td>
<td>0.896</td>
<td>0.313</td>
<td>0.525</td>
<td>0.586</td>
<td>0.962</td>
<td>0.276</td>
<td>0.446</td>
<td>None</td>
<td>&lt;cfbd.configuration.Configuration object at 0x...</td>
<td>333.0</td>
<td>SEC</td>
<td>West</td>
<td>10.5</td>
<td>{'games': 8, 'losses': 2, 'ties': 0, 'wins': 6}</td>
<td>{'games': 7, 'losses': 0, 'ties': 0, 'wins': 7}</td>
<td>{'games': 5, 'losses': 2, 'ties': 0, 'wins': 3}</td>
<td>None</td>
<td>13.0</td>
<td>11.0</td>
<td>2.0</td>
<td>0.0</td>
<td>0.846154</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>&lt;cfbd.configuration.Configuration object at 0x...</td>
<td>2022</td>
<td>Arizona</td>
<td>Pac-12</td>
<td>158.1</td>
<td>56.8</td>
<td>79.1</td>
<td>22.2</td>
<td>0.569</td>
<td>1.000</td>
<td>0.420</td>
<td>0.677</td>
<td>0.825</td>
<td>1.000</td>
<td>0.406</td>
<td>0.925</td>
<td>None</td>
<td>&lt;cfbd.configuration.Configuration object at 0x...</td>
<td>12.0</td>
<td>Pac-12</td>
<td></td>
<td>4.0</td>
<td>{'games': 9, 'losses': 6, 'ties': 0, 'wins': 3}</td>
<td>{'games': 7, 'losses': 4, 'ties': 0, 'wins': 3}</td>
<td>{'games': 5, 'losses': 3, 'ties': 0, 'wins': 2}</td>
<td>None</td>
<td>12.0</td>
<td>5.0</td>
<td>7.0</td>
<td>0.0</td>
<td>0.416667</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>&lt;cfbd.configuration.Configuration object at 0x...</td>
<td>2022</td>
<td>Arizona State</td>
<td>Pac-12</td>
<td>54.3</td>
<td>7.5</td>
<td>31.4</td>
<td>15.3</td>
<td>0.136</td>
<td>0.082</td>
<td>0.195</td>
<td>0.105</td>
<td>0.134</td>
<td>0.030</td>
<td>0.223</td>
<td>0.169</td>
<td>None</td>
<td>&lt;cfbd.configuration.Configuration object at 0x...</td>
<td>9.0</td>
<td>Pac-12</td>
<td></td>
<td>5.4</td>
<td>{'games': 9, 'losses': 7, 'ties': 0, 'wins': 2}</td>
<td>{'games': 6, 'losses': 4, 'ties': 0, 'wins': 2}</td>
<td>{'games': 6, 'losses': 5, 'ties': 0, 'wins': 1}</td>
<td>None</td>
<td>12.0</td>
<td>3.0</td>
<td>9.0</td>
<td>0.0</td>
<td>0.250000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Again we have to do a little extra cleaning when getting our data set up. A team’s win/loss data come in as an object (you can see an example in the conferece_games, home_games, and away_games columns, I just left those alone because I don’t need that granular information) so we have to do a little work to get the information from that object into its own columns, and then calculate winning percentage.</p>
<p>Now that we have our data set up as needed, let’s get to work with modeling. I’d like to do a comparison between the more traditional way of doing linear regression, out of the sklearn.linear_model.LinearRegression class, and doing it this new way with the stats model library. First off, this is how I would set up the data for sklearn.</p>
<div id="cell-10" class="cell" data-execution_count="118">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_squared_error, mean_absolute_error</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> full_df[<span class="st">'_percent_ppa'</span>].to_numpy().reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> full_df[<span class="st">'wp'</span>].to_numpy().reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> LinearRegression()</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>model.fit(x, y)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(x)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>r_squared <span class="op">=</span> model.score(x, y)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>mse <span class="op">=</span> mean_squared_error(y, y_pred)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>rmse <span class="op">=</span> np.sqrt(mse)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>mae <span class="op">=</span> mean_absolute_error(y, y_pred)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>intercept <span class="op">=</span> model.intercept_ </span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>slope <span class="op">=</span> model.coef_[<span class="dv">0</span>]</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"R-Squared: </span><span class="sc">{</span>r_squared<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"MSE: </span><span class="sc">{</span>mse<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"RMSE: </span><span class="sc">{</span>rmse<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"MAE: </span><span class="sc">{</span>mae<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Intercept: </span><span class="sc">{</span>intercept<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Slope: </span><span class="sc">{</span>slope<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R-Squared: 0.04974591372315962
MSE: 0.03846808567182547
RMSE: 0.19613282660438427
MAE: 0.16322629887376885
Intercept: [0.42350689]
Slope: [0.20232842]</code></pre>
</div>
</div>
<p>Now, this is a fairly basic example so there is not a ton that we need with our data before feeding it into our model. Of course, as we create more complex models this would become a more complex task. I am also able to pull out the summary information from the model, but it requires importing other classes and we have to write out formatted strings so we know what we are looking at.</p>
<p>Let’s compare this now to the statsmodels library.</p>
<div id="cell-12" class="cell" data-execution_count="116">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> full_df[<span class="st">'_percent_ppa'</span>]</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> full_df[<span class="st">'wp'</span>]</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> sm.add_constant(x)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> sm.OLS(y, x).fit()</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                            OLS Regression Results                            
==============================================================================
Dep. Variable:                     wp   R-squared:                       0.050
Model:                            OLS   Adj. R-squared:                  0.047
Method:                 Least Squares   F-statistic:                     19.53
Date:                Sun, 02 Feb 2025   Prob (F-statistic):           1.30e-05
Time:                        17:21:09   Log-Likelihood:                 78.759
No. Observations:                 375   AIC:                            -153.5
Df Residuals:                     373   BIC:                            -145.7
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
================================================================================
                   coef    std err          t      P&gt;|t|      [0.025      0.975]
--------------------------------------------------------------------------------
const            0.4235      0.026     16.527      0.000       0.373       0.474
_percent_ppa     0.2023      0.046      4.419      0.000       0.112       0.292
==============================================================================
Omnibus:                       13.233   Durbin-Watson:                   1.708
Prob(Omnibus):                  0.001   Jarque-Bera (JB):                6.402
Skew:                          -0.010   Prob(JB):                       0.0407
Kurtosis:                       2.360   Cond. No.                         5.75
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
</div>
</div>
</section>
<section id="thoughts-on-statsmodels" class="level1">
<h1>Thoughts on statsmodels</h1>
<p>Now that we have our two models made, I have a couple of initial thoughts before dissecting the output of the models.</p>
<p>The first is that statsmodels on its own really doesn’t incorporate R syntax as much as I initially thought that it would. In fact, it seems that the entire premise of using R syntax for creating models is more related to the (<a href="https://github.com/pydata/patsy">patsy dependency</a>), which is no longer in development, than the statsmodels library itself.</p>
<p>That being said, I do find this far easier than sklearn. With statsmodels, I don’t need to worry about converting my data into numpy arrays before putting the data into the model. The thing that I find most useful, however, is the fact that there is a built in summary method. Rather than having to pull each summary value out individually and getting it into a formatted string so I know what I am looking at, I can just do <code>model.summary()</code> and I can get a full look at what the model produces.</p>
<p>I find this to be far more convenient, and I certainly think I would use statsmodels if given a choice between that and sklearn.</p>
</section>
<section id="evaluating-our-model" class="level1">
<h1>Evaluating our model</h1>
<p>Our model suggests that returning production plays a very small role, but important role in predicting team success. Our R-Squared value says that only 5% of the variance in a team’s winning percentage is explained by returning production, but that there is a statistically significant relationship between the two. So the relationship is there, but the affect on a team’s success is pretty weak. I don’t think that I would use returning production as a real predictor of team success given what I see in this model. The relationship may be statistically significant, but it does not appear as though it is practically significant.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/bendemouth\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>